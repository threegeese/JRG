<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>JSONP</title>
    <style>
        div { width: 350px; font-size: 1.4em; border: 2px dotted slategray; margin: 30px auto; }
        p { text-align: center; } button { display: block; margin: 8px auto; }
    </style>
</head>
<body>
    <div>
        <p>You have <b id="amount">$$$amount$$$</b> ï¿¥</p>
        <button id="btn">Take my money</button>
    </div>

    <script>
        window.jsonp = function(result) {
            if(result === "success") {
                amount.innerText = amount.innerText - 1;
            } else {

            }
        }
        btn.addEventListener("click", () => {
            // amount.innerHTML = parseInt(amount.innerHTML,10) - 1;
            let script = document.createElement("script");
            script.src = "/pay?callback=jsonp";
            document.body.appendChild(script);
            script.onload = function(e) {
                e.currentTarget.remove();
            }
            script.onerror = function(e) {
                alert("Error!");
                e.currentTarget.remove();
            }
        });
    </script>
</body>
</html>